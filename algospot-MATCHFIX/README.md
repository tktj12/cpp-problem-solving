# Problem
* https://algospot.com/judge/problem/read/MATCHFIX
* 각 선수의 현재 승점과 남아있는 경기 목록이 주어질 때 X가 이기는 경우의 최소 승점 구하기
* 난이도 : 상

# Solution

### 방법 1 : 포드-풀커슨 (Ford-Fulkerson), 네트워크 유량
* 풀이
  * 승점의 획득과 손실을 유량이 있는 네트워크로 표현할 수 있다.
  * 네트워크 상에서 source에서 각 선수(정점)로 가는 간선이 현재 승점만큼의 용량으로 연결되어있다.
  * 선수끼리 누가 이기는지에 따라 승점을 가져갈 수 있다. 따라서 a선수와 b선수끼리 경기가 3경기 남았다면 
  우선 a에게 3점을 주고(source에서 주는 용량에 더함) a가 b에게 최대 3점까지 줄 수 있기 때문에 a에서 b로 가는 용량 3의 간선을 생성한다.
  * 모든 선수들은 최종적으로 sink로 가는 간선이 있다. 이 간선의 용량을 정하는 게 중요하다.   
  X에서 sink로 가는 간선을 xs, X외에 다른 선수들에서 sink로 가는 간선들을 os라고 하자. 
  그리고 X의 우승 승점을 now_x라고 하자. 따라서 xs의 용량은 now_x로, os의 용량을 now_x - 1로 둔다.
  그리고 포드-풀커슨 방법으로 네트워크상의 최대 유량을 알아낸다.   
  os를 now_x - 1로 둔다는 것은 X외에 다른 선수들이 최대 now_x - 1 만큼의 승점을 가질 수 있게 만든다는 의미이다. 
  따라서 그게 가능하다면, sink로 가는 네트워크의 최대 유량은 (모든 선수들의 총 승점 + 남은 경기 수)가 될 것이다. 
  최대 유량이 그것보다 더 적게 나왔다면 불가능하다는 의미이고 now_x를 1씩 늘려가며 X가 우승하는 최소의 승점이 몇인지 찾아야한다.
  * now_x는 당연히 다른 선수들의 승점보다 높아야 하므로 처음 값은 max(X의 현재 승점, max(다른 사람들의 현재 승점)+1) 이다.
  * X가 가질 수 있는 최대의 승점까지 시도했는데도 네트워크의 최대 유량이 (모든 선수들의 총 승점 + 남은 경기 수)만큼 
  나오지 않았다면 X가 리그를 단독으로 우승하는 경우가 있을 수 없다는 의미이다.

* 최적화   
  포드-풀커슨 알고리즘(방법)을 할 때마다 xs와 os의 용량만 1씩 늘기 때문에 유량(flow)을 초기화할 필요가 없다.  
  이렇게 되면 처음 포드-풀커슨을 한 다음부턴 포드-풀커슨을 할 때마다 $O(N)$번씩 BFS를 한다.

* 정당성 증명   
  now_x는 [X의 현재 승점, X가 가질 수 있는 최대 승점] 범위 안에 있다. 
  이 범위 안에서 os를 now_x - 1로 두었을 때 최대 유량이 (모든 선수들의 총 승점 + 남은 경기 수)만큼 나왔는데 
  xs의 유량이 now_x만큼 나오지 않았을 수 있다. 하지만 다른 선수에게 간 유량을 X에게 오게 만들어서 
  결국 now_x를 만들 수 있고, 이 경우에 os로가는 유량은 늘지 않고 오히려 줄어들기 때문에 os의 간선들 전부는 여전히 
  now_x - 1 이하임을 만족하고, 또한 os로 가는 유량 중 줄어든 유량이 곧 xs로 가는 유량이기 때문에 
  최대 유량도 바뀌지 않는다. 따라서 이 풀이는 항상 정당하다.

* 시간 복잡도 :
  * 이 풀이에 사용된 그래프는 정점 끼리의 유량이 있는 네트워크다. 즉 N개의 정점이 있고 $O(M)$개의 간선이 있다.
  now_x의 크기는 최대 M만큼 더 커질 수 있으므로 포드-풀커슨 방법으로 최대 유량을 최대 M번 구한다. 
  * 따라서 시간 복잡도는 $O(M) * O(N* M^2) = O(N*M^3)$
  * 최적화하면 시간 복잡도는 $O(N*M^2)$ + $O(N *M^2)$ = $O(N *M^2)$
    * 처음 포드-풀커슨에 $O(N*M^2)$시간 소요, 그 후 BFS( $O(N+M)$ )를 $O(N)$번 하는 걸 $O(M)$ 번 반복한다.
<br></br>
